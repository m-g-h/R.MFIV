t <- lubridate::ymd("2020-01-09", # 17th is near-term, 21st next-term, 20th NA
"2020-01-10", # 17th is NA,        21st near-term, 20th next-term
"2020-01-11") # 17th is NA,        21st near-term, 20th next-term
exp <- lubridate::ymd("2020-01-17",
"2020-02-21",
"2020-03-20")
res_mn <- numeric()
for (i in t) {
for (j in exp) {
print(c(i,j))
}
}
lubridate::ymd("2020-01-09", # 17th is near-term, 21st next-term, 20th NA
"2020-01-10", # 17th is NA,        21st near-term, 20th next-term
"2020-01-11")
## 2020-17-01 is first, 2020-02-21 is second, 2020-03-20 is third valid friday
t <- lubridate::ymd("2020-01-09", # 17th is near-term, 21st next-term, 20th NA
"2020-01-10", # 17th is NA,        21st near-term, 20th next-term
"2020-01-11") # 17th is NA,        21st near-term, 20th next-term
exp <- lubridate::ymd("2020-01-17",
"2020-02-21",
"2020-03-20")
t
exp
print(t[1])
for (i in t) {
for (j in exp) {
CBOE_interpolation_terms(date_t = i,
date_exp = j,
method = "monthly")
}
}
res_mn <- numeric()
for (i in 1:length(t)) {
for (j in 1:length(exp)) {
CBOE_interpolation_terms(date_t = t[i],
date_exp = exp[i],
method = "monthly")
}
}
## 2020-17-01 is first, 2020-02-21 is second, 2020-03-20 is third valid friday
t <- lubridate::ymd("2020-01-09", # 17th is near-term, 21st next-term, 20th NA
"2020-01-10", # 17th is NA,        21st near-term, 20th next-term
"2020-01-11") # 17th is NA,        21st near-term, 20th next-term
exp <- lubridate::ymd("2020-01-17",
"2020-02-21",
"2020-03-20")
res_mn <- numeric()
for (i in 1:length(t)) {
for (j in 1:length(exp)) {
res_mn <- c(res_mn,
CBOE_interpolation_terms(date_t = t[i],
date_exp = exp[i],
method = "monthly")
)
}
}
res_mn
## 2020-17-01 is first, 2020-02-21 is second, 2020-03-20 is third valid friday
t <- lubridate::ymd("2020-01-09", # 17th is near-term, 21st next-term, 20th NA
"2020-01-10", # 17th is NA,        21st near-term, 20th next-term
"2020-01-11") # 17th is NA,        21st near-term, 20th next-term
exp <- lubridate::ymd("2020-01-24", # invalid friday
"2020-01-17",
"2020-02-21",
"2020-03-20")
res_mn <- numeric()
for (i in 1:length(t)) {
for (j in 1:length(exp)) {
res_mn <- c(res_mn,
CBOE_interpolation_terms(date_t = t[i],
date_exp = exp[i],
method = "monthly")
)
}
}
res_mn
## 2020-17-01 is first, 2020-02-21 is second, 2020-03-20 is third valid friday
t <- lubridate::ymd("2020-01-09", # 17th is near-term, 21st next-term, 20th NA
"2020-01-10", # 17th is NA,        21st near-term, 20th next-term
"2020-01-11") # 17th is NA,        21st near-term, 20th next-term
exp <- lubridate::ymd("2020-01-24", # invalid friday
"2020-01-17",
"2020-02-21",
"2020-03-20")
res_mn <- numeric()
for (i in 1:length(t)) {
for (j in 1:length(exp)) {
res_mn <- c(res_mn,
CBOE_interpolation_terms(date_t = t[i],
date_exp = exp[i],
method = "monthly")
)
}
}
res_mn
res_mn <- numeric()
for (i in 1:length(t)) {
for (j in 1:length(exp)) {
print(c(t[i], exp[i]))
res_mn <- c(res_mn,
CBOE_interpolation_terms(date_t = t[i],
date_exp = exp[i],
method = "monthly")
)
}
}
## 2020-17-01 is first, 2020-02-21 is second, 2020-03-20 is third valid friday
t <- lubridate::ymd("2020-01-09", # 17th is near-term, 21st next-term, 20th NA
"2020-01-10", # 17th is NA,        21st near-term, 20th next-term
"2020-01-11") # 17th is NA,        21st near-term, 20th next-term
exp <- lubridate::ymd("2020-01-24", # invalid friday
"2020-01-17",
"2020-02-21",
"2020-03-20")
res_mn <- numeric()
for (i in 1:length(t)) {
for (j in 1:length(exp)) {
print(c(t[i], exp[i]))
res_mn <- c(res_mn,
CBOE_interpolation_terms(date_t = t[i],
date_exp = exp[i],
method = "monthly")
)
print(CBOE_interpolation_terms(date_t = t[i],
date_exp = exp[i],
method = "monthly"))
}
}
res_mn <- numeric()
for (i in 1:length(t)) {
for (j in 1:length(exp)) {
print(c(t[i], exp[j]))
res_mn <- c(res_mn,
CBOE_interpolation_terms(date_t = t[i],
date_exp = exp[j],
method = "monthly")
)
print(CBOE_interpolation_terms(date_t = t[i],
date_exp = exp[j],
method = "monthly"))
}
}
res_mn
## 2020-17-01 is first, 2020-02-21 is second, 2020-03-20, is third 2020-04-17 is fourth valid friday
t <- lubridate::ymd("2020-01-09", # 17th is near-term, 21st next-term, 20th NA
"2020-01-10", # 17th is NA,        21st near-term, 20th next-term
"2020-01-11"  # 17th is NA,        21st near-term, 20th next-term
"2020-01-22")
exp <- lubridate::ymd("2020-01-24", # invalid friday, always NA
"2020-01-17",
"2020-02-21",
"2020-03-20",
"2020-04-17")
res_mn <- numeric()
for (i in 1:length(t)) {
for (j in 1:length(exp)) {
print(c(t[i], exp[j]))
res_mn <- c(res_mn,
CBOE_interpolation_terms(date_t = t[i],
date_exp = exp[j],
method = "monthly")
)
}
}
res_mn
## 2020-17-01 is first, 2020-02-21 is second, 2020-03-20, is third 2020-04-17 is fourth valid friday
t <- lubridate::ymd("2020-01-09", # 17th is near-term, 21st next-term, 20th NA
"2020-01-10", # 17th is NA,        21st near-term, 20th next-term
"2020-01-11"  # 17th is NA,        21st near-term, 20th next-term
"2020-01-22")
exp <- lubridate::ymd("2020-01-24", # invalid friday, always NA
"2020-01-17",
"2020-02-21",
"2020-03-20",
"2020-04-17")
res_mn <- numeric()
for (i in 1:length(t)) {
for (j in 1:length(exp)) {
print(c(t[i], exp[j]))
res_mn <- c(res_mn,
CBOE_interpolation_terms(date_t = t[i],
date_exp = exp[j],
method = "monthly")
)
}
}
res_mn
res_mn <- numeric()
for (i in 1:length(t)) {
for (j in 1:length(exp)) {
print(c(t[i], exp[j]))
res_mn <- c(res_mn,
CBOE_interpolation_terms(date_t = t[i],
date_exp = exp[j],
method = "monthly")
)
print(CBOE_interpolation_terms(date_t = t[i],
date_exp = exp[j],
method = "monthly"))
}
}
res_mn
res_mn <- numeric()
for (i in 1:length(t)) {
for (j in 1:length(exp)) {
print(c(t[i], exp[j]),CBOE_interpolation_terms(date_t = t[i],
date_exp = exp[j],
method = "monthly"))
res_mn <- c(res_mn,
CBOE_interpolation_terms(date_t = t[i],
date_exp = exp[j],
method = "monthly")
)
}
}
res_mn
## 2020-17-01 is first, 2020-02-21 is second, 2020-03-20, is third 2020-04-17 is fourth valid friday
t <- lubridate::ymd("2020-01-09", # 17th is near-term, 21st next-term, 20th NA
"2020-01-10", # 17th is NA,        21st near-term, 20th next-term
"2020-01-11"  # 17th is NA,        21st near-term, 20th next-term
"2020-01-22")
exp <- lubridate::ymd("2020-01-24", # invalid friday, always NA
"2020-01-17",
"2020-02-21",
"2020-03-20",
"2020-04-17")
res_mn <- numeric()
for (i in 1:length(t)) {
for (j in 1:length(exp)) {
print(c(t[i], exp[j]),CBOE_interpolation_terms(date_t = t[i],
date_exp = exp[j],
method = "monthly"))
res_mn <- c(res_mn,
CBOE_interpolation_terms(date_t = t[i],
date_exp = exp[j],
method = "monthly")
)
}
}
res_mn <- numeric()
for (i in 1:length(t)) {
for (j in 1:length(exp)) {
print(c(t[i], exp[j]))
res_mn <- c(res_mn,
CBOE_interpolation_terms(date_t = t[i],
date_exp = exp[j],
method = "monthly")
)
}
}
res_mn <- numeric()
for (i in 1:length(t)) {
for (j in 1:length(exp)) {
print(c(t[i], exp[j]),
,CBOE_interpolation_terms(date_t = t[i],
date_exp = exp[j],
method = "monthly"))
res_mn <- c(res_mn,
CBOE_interpolation_terms(date_t = t[i],
date_exp = exp[j],
method = "monthly")
)
}
}
res_mn <- numeric()
for (i in 1:length(t)) {
for (j in 1:length(exp)) {
print(c(t[i], exp[j]))
print(CBOE_interpolation_terms(date_t = t[i],
date_exp = exp[j],
method = "monthly"))
res_mn <- c(res_mn,
CBOE_interpolation_terms(date_t = t[i],
date_exp = exp[j],
method = "monthly")
)
}
}
## 2020-17-01 is first, 2020-02-21 is second, 2020-03-20, is third 2020-04-17 is fourth valid friday
t <- lubridate::ymd("2020-01-09", # 17th is near-term, 21st next-term, 20th NA
"2020-01-10", # 17th is NA,        21st near-term, 20th next-term
"2020-01-11",  # 17th is NA,        21st near-term, 20th next-term
"2020-01-22")
exp <- lubridate::ymd("2020-01-24", # invalid friday, always NA
"2020-01-17",
"2020-02-21",
"2020-03-20",
"2020-04-17")
res_mn <- numeric()
for (i in 1:length(t)) {
for (j in 1:length(exp)) {
print(c(t[i], exp[j]))
print(CBOE_interpolation_terms(date_t = t[i],
date_exp = exp[j],
method = "monthly"))
res_mn <- c(res_mn,
CBOE_interpolation_terms(date_t = t[i],
date_exp = exp[j],
method = "monthly")
)
}
}
## 2020-17-01 is first, 2020-02-21 is second, 2020-03-20, is third 2020-04-17 is fourth valid friday
t <- lubridate::ymd("2020-01-09", # 17th is near-term, 21st next-term, 20th NA
"2020-01-10", # 17th is NA,        21st near-term, 20th next-term
"2020-01-11",  # 17th is NA,        21st near-term, 20th next-term
"2020-01-22",
"2020-01-23")
exp <- lubridate::ymd("2020-01-24", # invalid friday, always NA
"2020-01-17",
"2020-02-21",
"2020-03-20",
"2020-04-17")
res_mn <- numeric()
for (i in 1:length(t)) {
for (j in 1:length(exp)) {
print(c(t[i], exp[j]))
print(CBOE_interpolation_terms(date_t = t[i],
date_exp = exp[j],
method = "monthly"))
res_mn <- c(res_mn,
CBOE_interpolation_terms(date_t = t[i],
date_exp = exp[j],
method = "monthly")
)
}
}
## 2020-17-01 is first, 2020-02-21 is second, 2020-03-20, is third 2020-04-17 is fourth valid friday
t <- lubridate::ymd("2020-01-09", # 17th is near-term, 21st next-term, 20th NA
"2020-01-10", # 17th is NA,        21st near-term, 20th next-term
"2020-01-11",  # 17th is NA,        21st near-term, 20th next-term
"2020-02-10",
"2020-02-11")
exp <- lubridate::ymd("2020-01-24", # invalid friday, always NA
"2020-01-17",
"2020-02-21",
"2020-03-20",
"2020-04-17")
res_mn <- numeric()
for (i in 1:length(t)) {
for (j in 1:length(exp)) {
print(c(t[i], exp[j]))
print(CBOE_interpolation_terms(date_t = t[i],
date_exp = exp[j],
method = "monthly"))
res_mn <- c(res_mn,
CBOE_interpolation_terms(date_t = t[i],
date_exp = exp[j],
method = "monthly")
)
}
}
## 2020-17-01 is first, 2020-02-21 is second, 2020-03-20, is third 2020-04-17 is fourth valid friday
t <- lubridate::ymd("2020-01-09", # 17th is near-term, 21st next-term, 20th NA
"2020-01-10", # 17th is NA,        21st near-term, 20th next-term
"2020-01-11",  # 17th is NA,        21st near-term, 20th next-term
"2020-02-11",
"2020-02-12")
exp <- lubridate::ymd("2020-01-24", # invalid friday, always NA
"2020-01-17",
"2020-02-21",
"2020-03-20",
"2020-04-17")
res_mn <- numeric()
for (i in 1:length(t)) {
for (j in 1:length(exp)) {
print(c(t[i], exp[j]))
print(CBOE_interpolation_terms(date_t = t[i],
date_exp = exp[j],
method = "monthly"))
res_mn <- c(res_mn,
CBOE_interpolation_terms(date_t = t[i],
date_exp = exp[j],
method = "monthly")
)
}
}
## 2020-17-01 is first, 2020-02-21 is second, 2020-03-20, is third 2020-04-17 is fourth valid friday
t <- lubridate::ymd("2020-01-09", # 17th is near-term, 21st next-term, 20th NA
"2020-01-10", # 17th is NA,        21st near-term, 20th next-term
"2020-01-11",  # 17th is NA,        21st near-term, 20th next-term
"2020-02-11",
"2020-02-12")
exp <- lubridate::ymd("2020-01-24", # invalid friday, always NA
"2020-01-17",
"2020-02-21",
"2020-03-20",
"2020-04-17")
res_mn <- numeric()
for (i in 1:length(t)) {
for (j in 1:length(exp)) {
print(c(t[i], exp[j]))
print(CBOE_interpolation_terms(date_t = t[i],
date_exp = exp[j],
method = "monthly"))
res_mn <- c(res_mn,
CBOE_interpolation_terms(date_t = t[i],
date_exp = exp[j],
method = "monthly")
)
}
}
## 2020-17-01 is first, 2020-02-21 is second, 2020-03-20, is third 2020-04-17 is fourth valid friday
t <- lubridate::ymd("2020-01-09", # 17th is near-term, 21st next-term, 20th NA
"2020-01-10", # 17th is NA,        21st near-term, 20th next-term
"2020-01-11",  # 17th is NA,        21st near-term, 20th next-term
"2020-02-13",
"2020-02-14")
exp <- lubridate::ymd("2020-01-24", # invalid friday, always NA
"2020-01-17",
"2020-02-21",
"2020-03-20",
"2020-04-17")
res_mn <- numeric()
for (i in 1:length(t)) {
for (j in 1:length(exp)) {
print(c(t[i], exp[j]))
print(CBOE_interpolation_terms(date_t = t[i],
date_exp = exp[j],
method = "monthly"))
res_mn <- c(res_mn,
CBOE_interpolation_terms(date_t = t[i],
date_exp = exp[j],
method = "monthly")
)
}
}
res_mn
testthat::expect_equal(res_mn, c(NA, 1, 2, NA, NA,
NA, NA, 1, 2, NA,
NA, NA, 1, 2, NA,
NA, NA, 1, 2, NA,
NA, NA, NA, 1, 2))
## Monthly method
t <- lubridate::ymd("2020-01-02")
exp <- lubridate::ymd("2020-02-21")
CBOE_interpolation_terms(date_t = t, date_exp = exp, method = "monthly")
maturity <- c(0.07, 0.14)
sigma_sq <- c(0.5, 1)
stats::approx(x = maturity,
y = sigma_sq,
xout = 30/365)
stop(crayon::red("the provided arguments "),
crayon::silver("`maturity` "),
crayon::red("and "),
crayon::silver("`sigma_sq` "),
crayon::red("are not of length "),
crayon::silver("2 "),
crayon::red(". See "),
crayon::blue("`help(CBOE_VIX_interpolation)`"))
CBOE_VIX_interpolation <- function(maturity, sigma_sq){
if(length(maturity) != 2
|length(sigma_sq) != 2){
stop(crayon::red("the provided arguments "),
crayon::silver("`maturity` "),
crayon::red("and "),
crayon::silver("`sigma_sq` "),
crayon::red("are not of length "),
crayon::silver("2"),
crayon::red(". See "),
crayon::blue("`help(CBOE_VIX_interpolation)`"))
}
stats::approx(x = maturity,
y = sigma_sq,
xout = 30/365)
}
30/365
27/365
33/365
CBOE_VIX_interpolation(maturity = c(0.074, 0.09),
sigma_sq = c(0.3, 0.5))
30/365
#' @export
#'
#' @examples
#'
#' library(R.MFIV)
#'
#' CBOE_VIX_interpolation(maturity = c(0.074, 0.09),
#'                        sigma_sq = c(0.3, 0.5))
#'
#'
CBOE_VIX_interpolation <- function(maturity, sigma_sq){
if(length(maturity) != 2
|length(sigma_sq) != 2){
stop(crayon::red("the provided arguments "),
crayon::silver("`maturity` "),
crayon::red("and "),
crayon::silver("`sigma_sq` "),
crayon::red("are not of length "),
crayon::silver("2"),
crayon::red(". See "),
crayon::blue("`help(CBOE_VIX_interpolation)`"))
}
## LINEAR INTERPOLATION
sigma_sq_30 <- stats::approx(x = maturity,
y = sigma_sq*maturity,
xout = 30/365)$y
## CALCULATE ANNUALISED STANDARD DEVIATION IN PERCENTAGE POINTS
100 * sqrt(sigma_sq_30 * (365*24*60) / (30*24*60))
}
CBOE_VIX_interpolation(maturity = c(0.074, 0.09),
sigma_sq = c(0.3, 0.5))
CBOE_VIX_interpolation(maturity = c(0.074, 0.09),
sigma_sq = c(0.3, 0.5)
print(CBOE_VIX_interpolation(maturity = c(0.074, 0.09),
sigma_sq = c(0.3, 0.5)), digits = 20
)
library(R.MFIV)
?CBOE_VIX_index
library(R.MFIV)
